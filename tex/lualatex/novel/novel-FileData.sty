%%
%% This is file `novel-FileData.sty', part of class `novel'.
%% Copyright 2017 Robert Allgeyer.
%%
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
%%
\ProvidesFile{novel-FileData.sty}%
[2017/12/12 v1.46.4g LaTeX file (File Data settings)]
%% 


%% FILE DATA (PDF Metadata)
%% -----------------------------------------------------------------------------
%%
% \title{} or \SetTitle{}
% Copied to File Data at end of Preamble, unless not set.
% Provides \theTitle anywhere.
% If not set, PDF cannot conform to PDF/X.
\gdef\SetTitle#1{\gdef\@title{#1}} % for stylistic consistency
\gdef\title#1{\gdef\@title{#1}}
\gdef\thetitle{\@title} % for convenience
\gdef\theTitle{\@title}
\SetTitle{IMPORTANT: Provide Book Title} % Default as of v. 1.46.1. Formerly empty.
%
% \author{} or \SetAuthor{}
% Copied to File Data at end of preamble, unless not set.
% Provides \theAuthor anywhere.
\gdef\SetAuthor#1{\gdef\@author{#1}} % for stylistic consistency
\gdef\author#1{\gdef\@author{#1}}
\gdef\theauthor{\@author} % for convenience
\gdef\theAuthor{\@author}
\SetAuthor{}
%
% \subtitle{}  or \SetSubtitle{}  (if any)
% Not copied to File Data by itself, as there is no such metadata entry.
% Provides \theSubtitle anywhere.
\gdef\SetSubtitle#1{\gdef\@subtitle{#1}} % for stylistic consistency
\gdef\subtitle#1{\gdef\@subtitle{#1}}
\gdef\thesubtitle{\@subtitle} % compatibility
\gdef\theSubtitle{\@subtitle}
\SetSubtitle{}
%
% \SetApplication{}  (rarely used)
% Also known as CreatorTool.
% Name of the software that created the source document.
% Changing this does not change the software, it just changes the name.
% Normally leave as default, but can change if urgent.
\gdef\SetApplication#1{\gdef\@novelApplication{#1}}
\SetApplication{LuaLaTeX with novel and microtype} % default
%
% \SetProducer{}  (rarely used)
% Name of the software that compiles to source to make PDF.
% Changing this does not change the software, it just changes the name.
% Normally leave as default, but can change if urgent.
\gdef\SetProducer#1{\gdef\@novelProducer{#1}}
\SetProducer{LuaLaTeX with novel-pdfx and hyperref} % default
%
% Although some other data fields could have been added,
%   they do not pertain to fiction, especially if your book is print-on-demand.
% For example, subject, keywords and description are not read from PDF metadata,
%   you enter them in a form, when you obtain the ISBN.
% No need to set copyright in metadata, since your book is only for use by
%   the print service, and is not being distributed as a PDF e-book.
%   Your copyright notice is on the printed page, where it should be.
% Particularly note that your print service is NOT the publisher: YOU are!
%
%% End file data.


%% SET PDF/X ARGUMENTS
%% -----------------------------------------------------------------------------
%% \SetPDFX[Output Intent]{compliance standard} % Does not embed *.icc. Default.
%% \SetPDFX*[Output Intent]{compliance standard} % Embeds *.icc.
%% Default up to and including v. 1.46: \SetPDFX{off}
%% Default as of v. 1.46.1: \SetPDFX[CGATSTR001]{X-1a:2001}
%
\newif \if@chosenComplianceOK
\newif \if@chosenOutputIntentOK
\newif \if@chosenEmbedOK
\newif \if@gotConformance
\newif \if@noembedicc \@noembedicctrue
% \@pdfxSEToff refers to the setting, rather than whether or not it really is off.
% \@pdfxISoff refers to whether it really is off (perhaps something over-rode the setting).
\newif \if@pdfxSEToff % Prior to v. 1.46.1, was \ifpdfx@isOFF.
\newif \if@pdfxISoff % New in v. 1.46.1.
% These will get meaningful info when an output intent file is loaded:
\gdef\@OIidentifier{}
\gdef\@OIcondition{}
\gdef\@OIinfo{}
\gdef\@OIregistry{}
\gdef\@OIprofile{}
%
%%
\gdef\SetPDFX{\@ifstar\@setpdfxst\@setpdfxns}
\newcommand\@setpdfxst[2][CGATSTR001]{
  \global\@noembediccfalse
  \@setpdfx{#1}{#2}
}
\newcommand\@setpdfxns[2][CGATSTR001]{
  \global\@noembedicctrue
  \@setpdfx{#1}{#2}
}
%
\newcommand\@setpdfx[2]{
  \ifthenelse{\equal{#2}{off}}{
    \global\@pdfxSETofftrue
    \global\@pdfxISofftrue
    \@chosenComplianceOKtrue
  }{}
  \ifthenelse{\equal{#2}{X-1a:2001}}{
    \global\@pdfxSETofffalse
    \global\@pdfxISofffalse
    \@chosenComplianceOKtrue
    \gdef\@PDFversion{PDF/X-1}
    \gdef\@PDFXversion{PDF/X-1a:2001}
    \gdef\@PDFXconformance{PDF/X-1a:2001}
    \global\@gotConformancetrue
    \global\pdfminorversion=3
  }{}
  \ifthenelse{\equal{#2}{X-1a:2003}}{
    \global\@pdfxSETofffalse
    \global\@pdfxISofffalse
    \@chosenComplianceOKtrue
    \gdef\@PDFversion{PDF/X-1}
    \gdef\@PDFXversion{PDF/X-1a:2003}
    \gdef\@PDFXconformance{PDF/X-1a:2003}
    \global\@gotConformancetrue
    \global\pdfminorversion=3
  }{}
  \ifthenelse{\equal{#2}{X-3:2002}}{
    \global\@pdfxSETofffalse
    \global\@pdfxISofffalse
    \@chosenComplianceOKtrue
    \gdef\@PDFversion{PDF/X-3}
    \gdef\@PDFXversion{PDF/X-3:2002}
    \global\pdfminorversion=3
  }{}
  \ifthenelse{\equal{#2}{X-3:2003}}{
    \global\@pdfxSETofffalse
    \global\@pdfxISofffalse
    \@chosenComplianceOKtrue
    \gdef\@PDFversion{PDF/X-3}
    \gdef\@PDFXversion{PDF/X-3:2003}
    \global\pdfminorversion=4
  }{}
  \if@chosenComplianceOK\else
    \ClassError{novel}{Bad compliance argument for \string\SetPDFX}%
     {Choose: X-1a:2001, X-1a:2003, X-3:2002, X-3:2003, off.^^J}%
  \fi
  % Prior to version 1.46.2, this info was in separate files:
  \if@pdfxSEToff\else % Output Intent ignored if compliance set `off'.
    % Ignore spaces, so that CGATS TR 001 = CGATSTR001:
    \StrDel{#1}{\space}[\@NPDFXOINS]
    \ifthenelse{\equal{\@NPDFXOINS}{CGATSTR001}}{%
      \global\@chosenOutputIntentOKtrue
      % Data for Output Intent CGATS TR 001:
      \gdef\@OIidentifier{CGATS TR 001} % also called "reference name"
      \gdef\@OIcondition{SWOP (Publication) printing in USA (Printing process definition: ANSI CGATS.6).}
      \gdef\@OIinfo{U.S. Web Coated (SWOP) v2}
      \gdef\@OIregistry{http://www.color.org}
      \gdef\@OIprofile{USWebCoatedSWOP.icc}
      % end CGATS TR 001.
    }{} %
    \ifthenelse{\equal{\@NPDFXOINS}{FOGRA39}}{%
      \global\@chosenOutputIntentOKtrue
      % Data for Output Intent FOGRA39:
      \gdef\@OIidentifier{FOGRA39} % also called "reference name"
      \gdef\@OIcondition{Offset commercial and specialty printing according to ISO 12647-2:2004 / Amd 1, paper type 1 or 2 (gloss or matte coated offset, 115 g/m2), screen frequency 60/cm.}
      \gdef\@OIinfo{Coated FOGRA39 (ISO 12647-2:2004)}
      \gdef\@OIregistry{http://www.color.org}
      \gdef\@OIprofile{CoatedFOGRA39.icc}
      % end FOGRA39.
    }{} %
    \ifthenelse{\equal{\@NPDFXOINS}{JC200103}}{%
      \global\@chosenOutputIntentOKtrue
      % Data for Output Intent JC200103:
      \gdef\@OIidentifier{JC200103} % also called "reference name"
      \gdef\@OIcondition{Japan Color 2001 Coated: Printing process definition: ISO 12647-2:2004, sheet-fed offset printing, positive plates, paper type 3 (coated, 105 gsm), screen frequency 69/cm.}
      \gdef\@OIinfo{Japan Color 2001 Coated}
      \gdef\@OIregistry{http://www.color.org}
      \gdef\@OIprofile{JapanColor2001Coated.icc}
      % end JC200103.
    }{} %
    \if@chosenOutputIntentOK\else
      % Grab the file that defines the Output Intent information:
      % File name format: novel-YourIntent.clo
      % Setting: \SetPDFX[YourIntent]{compliance}
      % Contents of file: See the above included Output Intent data.
      \makeatletter % Apparently needed when non-*.sty is input within a command!
      \IfFileExists{novel-\@NPDFXOINS.clo}{\input{novel-\@NPDFXOINS.clo}}{%
        \PackageError{novel-PDFX}{Bad Output Intent argument for \string\SetPDFX}%
         {Use filename (without extension) of a file with *.clo extension.^^J%
          Filename must begin with novel-^^J%
          Example: File novel-FOGRA39.clo is called as [FOGRA39].^^J%
          The file must be where TeX can find it.^^J%
          For contents of the file, see package documentation,^^J%
          or look inside `novel-PDFX.sty' for MODEL CODE FOR OUTPUT INTENTS.}%
      }{}%
      \makeatother % back to usual
    \fi
  \fi
} % end \@setpdfx
%
\SetPDFX[CGATSTR001]{X-1a:2001} % Default, from v. 1.46.1. Formerly off.
%%



%%
%% End of file `novel-FileData.sty'.


